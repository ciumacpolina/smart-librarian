/* ===========================
   Reset & Base
   =========================== */
* { box-sizing: border-box; }
html, body { height: 100%; }
body {
  margin: 0;
  color: #111827;
  font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, "Helvetica Neue", Arial;
  line-height: 1.45;
  -webkit-font-smoothing: antialiased;
}

/* ===========================
   Header
   =========================== */
.site-header {
  max-width: 1100px;
  margin: 28px auto 8px;
  padding: 0 16px;
}
.brand { display: flex; align-items: center; gap: .6rem; }
.brand .logo { font-size: 1.9rem; line-height: 1; }

/* Titlu mare, lizibil pe fundal închis */
.brand-title{
  margin: 0;
  font-family: "Poppins", ui-sans-serif, system-ui, -apple-system;
  font-weight: 900;
  letter-spacing: .4px;
  line-height: 1.15;
  font-size: 2.2rem;
  background: linear-gradient(90deg, #eaf4ff, #bfe3ff);
  -webkit-background-clip: text;
  background-clip: text;
  color: transparent;
  text-shadow: 0 2px 10px rgba(0, 0, 0, .35);
}

/* Subtitlu clar, contrast bun */
.subtitle{
  margin-top: 4px;
  font: 600 14px/1.2 "Inter", ui-sans-serif, system-ui, -apple-system;
  color: #cfe2ff;
  letter-spacing: .2px;
  text-shadow: 0 1px 6px rgba(0,0,0,.25);
  opacity: .95;
}

/* ===========================
   Chat container (glass card)
   =========================== */
.chat-shell { display: grid; place-items: center; padding: 16px; }
.chat-wrap {
  width: min(980px, 92vw);
  height: calc(92vh - 120px);
  background: rgba(255,255,255,.82);
  border: 1px solid rgba(17,24,39,.08);
  border-radius: 16px;
  box-shadow: 0 10px 30px rgba(0,0,0,.08), inset 0 1px 0 rgba(255,255,255,.8);
  backdrop-filter: blur(6px) saturate(120%);
  -webkit-backdrop-filter: blur(6px) saturate(120%);
  padding: 14px;
  overflow: hidden;

  display: flex;
  flex-direction: column;
}

/* ===========================
   Chat area & bubbles
   =========================== */
.chat-area{
  flex: 1 1 auto;
  overflow-y: auto;
  padding: 8px 6px 6px 2px;
  scroll-behavior: smooth;

  display: flex;
  flex-direction: column;
  gap: 12px;
}

.msg{
  max-width: 72%;
  border: 1px solid #e5e7eb;
  border-radius: 14px;
  padding: 10px 12px;
  background: #fff;
  box-shadow: 0 2px 6px rgba(0,0,0,.06);
}

/* Bot stânga */
.msg-bot{
  align-self: flex-start;
  background:#f8fafc;
  border-left: 3px solid #2563eb;
}

/* User dreapta */
.msg-user{
  align-self: flex-end;
  background:#eef5ff;
  border-color:#dbe7ff;
  box-shadow: 0 2px 6px rgba(59,130,246,.12);
}

/* Mic label „Bot / You” */
.msg strong{
  display: block;
  font-size: .85rem;
  color: #6b7280;
  margin-bottom: 4px;
}

/* ===========================
   Composer (sticky jos)
   =========================== */
.composer {
  position: sticky;
  bottom: 6px;
  background: #ffffff;
  border: 1px solid #e5e7eb;
  border-radius: 14px;
  box-shadow: 0 8px 20px rgba(0,0,0,.06);
  padding: 8px;
  display: grid;
  grid-template-columns: 1fr auto auto;
  gap: 10px;
  margin-top: 10px;
}

.composer-input {
  width: 100%;
  height: 46px;
  border: 2px solid #a5b4fc;
  background: #ffffff;
  padding: 0 14px;
  border-radius: 10px;
  font-size: 16px;
  outline: none;
  box-shadow: inset 0 0 0 1px rgba(99,102,241,.06);
}
.composer-input:focus {
  border-color: #6366f1;
  box-shadow: 0 0 0 3px rgba(99,102,241,.22);
}
.composer-input::placeholder { color: #6b7280; opacity: .95; }

.btn {
  border: 0;
  border-radius: 10px;
  padding: 0 16px;
  font-weight: 700;
  cursor: pointer;
  height: 46px;
}
.btn.mic  { background: #eef2ff; }
.btn.mic:hover { background: #e5e7ff; }
.btn.send { background: #2563eb; color: #fff; }
.btn.send:hover { background: #1d4ed8; }
#micBtn.recording { background:#fee2e2; color:#b91c1c; }

/* ===========================
   Buttons în mesaje
   =========================== */
.speak-btn,
.icon-btn{
  padding: .25rem .55rem;
  line-height: 1;
  border: 1px solid #d1d5db;
  border-radius: 8px;
  background: #fff;
  cursor: pointer;
}
.speak-btn:hover,
.icon-btn:hover{ background:#f3f4f6; }

/* ===========================
   Imagini generate
   =========================== */
.gen-img{
  width: 240px;
  height: auto;
  border: 1px solid #e5e7eb;
  border-radius: 10px;
  margin-top: 8px;
  cursor: zoom-in;
  display: block;
}
.gen-img.full{
  width: 100%;
  max-width: 640px;
  cursor: zoom-out;
}

/* ===========================
   Carduri structurate
   =========================== */
.book-card{
  background:#ffffff;
  border:1px solid #e5e7eb;
  border-radius:12px;
  padding:12px 14px;
  margin:12px 0;
  box-shadow:0 1px 2px rgba(0,0,0,.03);
}
.book-title{
  font-size:1.1rem;
  font-weight:800;
  line-height:1.25;
  margin-bottom:6px;
}
.why-label,.summary-label{
  font-size:.8rem;
  letter-spacing:.03em;
  text-transform:uppercase;
  color:#6b7280;
  margin:6px 0 4px;
}
.book-reasons{ margin:4px 0 8px 1.25rem; padding-left:0; }
.book-reasons li{ margin-bottom:4px; }

/* ===========================
   Teme de fundal
   =========================== */

/* Default – „blueprints” (dark, tehnic, cu elemente de cărți) */
body.theme-blueprints{
  background-color:#0b2545;
  background-image:url("data:image/svg+xml;utf8,\
<svg xmlns='http://www.w3.org/2000/svg' width='320' height='320' viewBox='0 0 320 320'>\
  <g fill='none' stroke='%23ffffff' stroke-opacity='.15' stroke-width='2'>\
    <rect x='24' y='24' rx='6' ry='6' width='96' height='64'/>\
    <line x1='40' y1='48' x2='104' y2='48'/>\
    <line x1='40' y1='64' x2='96' y2='64'/>\
    <path d='M200 56c0-8 16-8 16 0v40c0 8-16 8-16 0z'/>\
    <path d='M200 56c0-8-16-8-16 0v40c0 8 16 8 16 0z'/>\
    <rect x='56' y='200' width='32' height='80' rx='4'/>\
    <rect x='96' y='184' width='32' height='96' rx='4'/>\
    <rect x='136' y='208' width='32' height='72' rx='4'/>\
    <circle cx='256' cy='256' r='20'/>\
    <line x1='236' y1='236' x2='276' y2='276'/>\
  </g>\
  <g fill='none' stroke='%230ea5e9' stroke-opacity='.12'>\
    <path d='M0 0H320V320H0z'/>\
    <path d='M0 64H320M0 128H320M0 192H320M0 256H320'/>\
    <path d='M64 0V320M128 0V320M192 0V320M256 0V320'/>\
  </g>\
</svg>");
  background-size:320px 320px;
  background-repeat:repeat;
}
/* contrast constant pt. titlu/subtitlu pe dark */
body.theme-blueprints .subtitle { color: #dbeafe; }
body.theme-blueprints .brand-title{
  background: linear-gradient(90deg, #f0f7ff, #c7e6ff);
  -webkit-background-clip: text;
  background-clip: text;
  color: transparent;
}

/* Opțional – iconițe de cărți (soft, luminos) */
body.theme-bookicons {
  background: radial-gradient(1100px 700px at 10% -20%, #E6F0FF 0%, #FBF7FF 55%, #F8F5F0 100%) fixed;
  background-image:
    url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' opacity='.14'><rect x='3' y='3' width='14' height='18' rx='2' ry='2' fill='none' stroke='%2393A3B8' stroke-width='1.4'/><path d='M7 3v18' fill='none' stroke='%2393A3B8' stroke-width='1.4'/></svg>");
  background-repeat: repeat;
  background-size: 48px 48px;
}

/* Opțional – rafturi stilizate (bibliotecă) */
body.theme-bookshelf {
  background:
    radial-gradient(1200px 800px at 15% -20%, #E9F1FF 0%, #F9F6FF 55%, #FAF7F2 100%) fixed;
  background-image:
    linear-gradient(to bottom, rgba(0,0,0,.06) 0 1px, transparent 1px 160px),
    linear-gradient(to bottom, #d6c1a8 0 8px, transparent 8px 160px);
  background-size: 100% 160px, 100% 160px;
  background-repeat: repeat-y;
}

/* ===========================
   Scrollbar (webkit)
   =========================== */
.chat-area::-webkit-scrollbar{ width: 10px; }
.chat-area::-webkit-scrollbar-thumb{ background: rgba(17,24,39,.18); border-radius: 8px; }
.chat-area::-webkit-scrollbar-track{ background: transparent; }

/* ===========================
   Responsive
   =========================== */
@media (max-width: 760px){
  .brand-title { font-size: 1.7rem; }
  .subtitle    { font-size: 13px; }
  .chat-wrap   { height: calc(96vh - 130px); }
  .composer-input { font-size: 15px; }
}

/* ======= Base Colors: Light, Bookish, Warm ======= */
:root {
  --bg-main: #f9f6f2;
  --bg-bookshelf: #f5ede3;
  --shelf: #e5d3b3;
  --book1: #e9b384;
  --book2: #b4a078;
  --book3: #d9cfc1;
  --book4: #f7c873;
  --book5: #c9b6a7;
  --text: #5b4636;
  --muted: #a89c8e;
  --accent: #b48a78;
  --bot-bg: #fff8f0;
  --user-bg: #f7e9d2;
  --border: #e5e0d8;
}

/* ======= Animated bookshelf background ======= */
.bookshelf-bg {
  position: fixed;
  inset: 0;
  z-index: 0;
  width: 100vw;
  height: 100vh;
  overflow: hidden;
  pointer-events: none;
  background: var(--bg-bookshelf);
}
#animated-bookshelf {
  display: block;
  width: 100vw;
  height: 100vh;
  position: absolute;
  left: 0; top: 0;
}
.bookshelf-side {
  position: absolute;
  top: 0;
  height: 100vh;
  width: 120px;
  z-index: 1;
  opacity: 0.85;
}
.bookshelf-side.left { left: 0; }
.bookshelf-side.right { right: 0; transform: scaleX(-1); }

/* ======= Layout & Header ======= */
body {
  margin: 0;
  color: var(--text);
  font-family: 'Inter', ui-sans-serif, system-ui, -apple-system;
  background: var(--bg-main);
  min-height: 100vh;
  position: relative;
}
.site-header {
  max-width: 1100px;
  margin: 32px auto 12px;
  padding: 0 16px;
  z-index: 2;
  position: relative;
}
.brand {
  display: flex;
  align-items: center;
  gap: .7rem;
}
.brand .logo {
  font-size: 2.1rem;
  line-height: 1;
  display: flex;
  align-items: center;
}
.brand-title {
  margin: 0;
  font-family: "Poppins", ui-sans-serif, system-ui, -apple-system;
  font-weight: 900;
  letter-spacing: .4px;
  line-height: 1.15;
  font-size: 2.2rem;
  color: var(--accent);
  text-shadow: 0 2px 10px rgba(180,138,120,0.08);
}

/* ======= Chat Card ======= */
.chat-shell {
  display: grid;
  place-items: center;
  padding: 16px;
  z-index: 2;
  position: relative;
}
.chat-wrap {
  width: min(980px, 94vw);
  height: calc(92vh - 120px);
  background: rgba(255,255,255,.78); /* Lowered opacity */
  border: 1px solid var(--border);
  border-radius: 18px;
  box-shadow: 0 10px 30px rgba(180,138,120,.10), 0 1px 0 rgba(255,255,255,.8);
  backdrop-filter: blur(7px) saturate(120%);
  -webkit-backdrop-filter: blur(7px) saturate(120%);
  padding: 16px;
  overflow: hidden;
  display: flex;
  flex-direction: column;
}

/* ======= Chat Area & Bubbles ======= */
.chat-area {
  flex: 1 1 auto;
  overflow-y: auto;
  padding: 8px 6px 6px 2px;
  scroll-behavior: smooth;
  display: flex;
  flex-direction: column;
  gap: 14px;
}
.msg {
  max-width: 72%;
  border: 1px solid var(--border);
  border-radius: 16px;
  padding: 12px 16px;
  background: #fff;
  box-shadow: 0 2px 6px rgba(180,138,120,.06);
}
.msg-bot {
  align-self: flex-start;
  background: var(--bot-bg);
  border-left: 4px solid var(--accent);
}
.msg-user {
  align-self: flex-end;
  background: var(--user-bg);
  border-color: var(--border);
  box-shadow: 0 2px 6px rgba(180,138,120,.12);
}
.msg strong {
  display: block;
  font-size: .85rem;
  color: var(--muted);
  margin-bottom: 4px;
}

/* ======= Composer (Sticky Bottom) ======= */
.composer {
  position: sticky;
  bottom: 6px;
  background: #fff;
  border: 1px solid var(--border);
  border-radius: 16px;
  box-shadow: 0 8px 20px rgba(180,138,120,.06);
  padding: 8px;
  display: grid;
  grid-template-columns: 1fr auto auto;
  gap: 10px;
  margin-top: 10px;
}
.composer-input {
  width: 100%;
  height: 46px;
  border: 2px solid var(--accent);
  background: #fff;
  padding: 0 14px;
  border-radius: 12px;
  font-size: 16px;
  outline: none;
  box-shadow: inset 0 0 0 1px rgba(180,138,120,.06);
}
.composer-input:focus {
  border-color: var(--shelf);
  box-shadow: 0 0 0 3px rgba(180,138,120,.13);
}
.composer-input::placeholder { color: var(--muted); opacity: .95; }
.btn {
  border: 0;
  border-radius: 12px;
  padding: 0 18px;
  font-weight: 700;
  cursor: pointer;
  height: 46px;
  background: var(--shelf);
  color: var(--text);
  transition: background .15s;
}
.btn.mic  { background: var(--book3); }
.btn.mic:hover { background: var(--book4); }
.btn.send { background: var(--accent); color: #fff; }
.btn.send:hover { background: var(--book1); color: var(--text); }
#micBtn.recording { background: #fee2e2; color: #b91c1c; }

/* ======= Book Cards ======= */
.book-card {
  background: #fff;
  border: 1px solid var(--border);
  border-radius: 14px;
  padding: 14px 16px;
  margin: 14px 0;
  box-shadow: 0 1px 2px rgba(180,138,120,.03);
}
.book-title {
  font-size: 1.1rem;
  font-weight: 800;
  line-height: 1.25;
  margin-bottom: 6px;
  color: var(--accent);
}
.why-label, .summary-label {
  font-size: .8rem;
  letter-spacing: .03em;
  text-transform: uppercase;
  color: var(--muted);
  margin: 6px 0 4px;
}
.book-reasons { margin: 4px 0 8px 1.25rem; padding-left: 0; }
.book-reasons li { margin-bottom: 4px; }

/* ======= Generated Images ======= */
.gen-img {
  width: 240px;
  height: auto;
  border: 1px solid var(--border);
  border-radius: 10px;
  margin-top: 8px;
  cursor: zoom-in;
  display: block;
  box-shadow: 0 1px 2px rgba(180,138,120,.05);
}
.gen-img.full {
  width: 100%;
  max-width: 640px;
  cursor: zoom-out;
}

/* ======= Responsive ======= */
@media (max-width: 760px) {
  .brand-title { font-size: 1.5rem; }
  .chat-wrap   { height: calc(96vh - 130px); }
  .composer-input { font-size: 15px; }
  .bookshelf-side { display: none; }
}
